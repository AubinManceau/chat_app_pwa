(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[538],{4084:(e,o,t)=>{Promise.resolve().then(t.bind(t,9262))},9262:(e,o,t)=>{"use strict";t.d(o,{F:()=>u,SocketProvider:()=>a});var n=t(5155),s=t(2115),c=t(9829);let r=(0,s.createContext)(null),a=e=>{let{children:o}=e,[t,a]=(0,s.useState)(null),[u,l]=(0,s.useState)(null);return(0,s.useEffect)(()=>{let e=(0,c.io)("https://api.tools.gavago.fr",{transports:["websocket"],autoConnect:!0,reconnection:!0,reconnectionAttempts:1/0});return e.on("connect",()=>{console.log("\uD83D\uDFE2 Connect\xe9 au serveur Socket.IO")}),e.on("disconnect",e=>{console.log("\uD83D\uDD34 D\xe9connect\xe9 du serveur Socket.IO",e)}),e.on("connect_error",e=>{console.log("⚠️ Erreur de connexion Socket.IO",e)}),a(e),()=>{e.disconnect()}},[]),(0,n.jsx)(r.Provider,{value:{socket:t,currentRoom:u,joinRoom:(e,o)=>{t&&u!==e&&(t.off("chat-join-room"),l(null),t.emit("chat-join-room",{pseudo:o,roomName:e}),l(e))},sendMessage:e=>{u&&t&&t.emit("chat-msg",{content:e,roomName:u})},sendImageMessage:e=>{u&&t&&t.emit("chat-msg",{content:e,roomName:u})},getMessages:e=>{t&&(t.off("chat-msg"),t.on("chat-msg",o=>{e(o)}))}},children:o})},u=()=>{let e=(0,s.useContext)(r);if(!e)throw Error("useSocket must be used within a SocketProvider");return e}}},e=>{e.O(0,[829,441,255,358],()=>e(e.s=4084)),_N_E=e.O()}]);